# Copyright 2012 Joonas Saraj√§rvi <muep@iki.fi>
# Distributed under the terms of GNU General Public License v2

require cmake sourceforge [ project=ogl-math suffix=zip ]

SUMMARY="header-only C++ mathematics library"
HOMEPAGE="http://glm.g-truc.net/"
LICENCES="MIT"
SLOT="0"

PLATFORMS="~x86 ~amd64"

MYOPTIONS="
    doc [[ description = [ install reference documentation ] ]]
"

CMAKE_SRC_CONFIGURE_PARAMS=(
    '-DGLM_TEST_MODE:BOOL=TRUE'
)

# Use this in future releases in case their source archive has
# no common subdirectory for all the contents.
#
# src_unpack() {
#     mkdir -pv ${WORK}
#     cd ${WORK}
#     unpack ${PNV}.zip
# }

src_configure() {
    if expecting_tests ; then
        cmake_src_configure
    fi
}

src_compile() {
    if expecting_tests ; then
        cmake_src_compile
    fi
}

src_test() {
    if expecting_tests ; then
        cmake_src_test
    fi
}

src_install() {
    edo mkdir -pv "${IMAGE}"/usr/include
    edo cp -r "${WORK}"/glm "${IMAGE}"/usr/include/glm

    if option doc ; then
        # TODO: Automate the version part.
        insinto /usr/share/doc/${PNVR}
        doins doc/${PN}-0.9.3.pdf
        insinto /usr/share/doc/${PNVR}/html
        doins doc/api-0.9.3/*
    fi
}

